# üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (simulation/visualization/)

–ü–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–æ–¥—É–ª–∏ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–∏–º—É–ª—è—Ü–∏–∏: –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏—é.    

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
visualization/
‚îú‚îÄ‚îÄ plots.py # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞—Ñ–∏–∫–∏
‚îî‚îÄ‚îÄ animation.py # –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
```

## üìÑ –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### `plots.py` - –ì—Ä–∞—Ñ–∏–∫–∏

–ù–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø–æ –∏—Ç–æ–≥–∞–º —Å–∏–º—É–ª—è—Ü–∏–∏.    

#### –§—É–Ω–∫—Ü–∏–∏:

**1. `plot_queue_dynamics(queue_history, business_queue_history=None, start_time="00:00")`**
- –î–≤–∞ –≥—Ä–∞—Ñ–∏–∫–∞: –æ—á–µ—Ä–µ–¥—å –º–æ–¥–µ–ª–µ–π –∏ –æ—á–µ—Ä–µ–¥—å –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª  
- –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ß–ß:–ú–ú  
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã  

**2. `plot_specialist_load(specialist_busy_history, specialists_count, start_time="00:00")`**
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö  
- –û—Ç–º–µ—Ç–∫–∏: 100% (–º–∞–∫—Å–∏–º—É–º), 80% (—Ü–µ–ª—å `PID`)  
- –ü–æ–º–æ–≥–∞–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞  

**3. `plot_inflow(minute_counts, start_time="00:00")`**
- –í—Ö–æ–¥—è—â–∏–π –ø–æ—Ç–æ–∫ –∑–∞—è–≤–æ–∫ –ø–æ –º–∏–Ω—É—Ç–∞–º  
- –°–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ –∑–∞ 30 –º–∏–Ω—É—Ç  
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è  

**4. `plot_detailed_decisions(batch_stats, second_model_name="XGBoost", start_time="00:00")`**
- 6 –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø–æ —Ç–∏–ø–∞–º —Ä–µ—à–µ–Ω–∏–π:  
- –†—É—á–Ω–æ–π —Ä–∞–∑–±–æ—Ä –æ—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª  
- –ê–≤—Ç–æ-–æ—Ç–∫–∞–∑ –æ—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª  
- –£–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è `LR`  
- –£–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–π –º–æ–¥–µ–ª–∏   
- –†—É—á–Ω–æ–π —Ä–∞–∑–±–æ—Ä –æ—Ç –º–æ–¥–µ–ª–µ–π  
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞  

**5. `plot_parameters_history(pid_history, second_model_name="XGBoost", start_time="00:00")`**
- –î–∏–Ω–∞–º–∏–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤ `LR` –∏ –≤—Ç–æ—Ä–æ–π –º–æ–¥–µ–ª–∏ 
- –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –≤—ã—Ö–æ–¥ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞  
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ `PID` –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É  

#### –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è:

`minutes_to_time(minutes, start_time)` - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–∏–Ω—É—Ç—ã –æ—Ç —Å—Ç–∞—Ä—Ç–∞ –≤ –ß–ß:–ú–ú  

### `animation.py` - –ê–Ω–∏–º–∞—Ü–∏—è

–°–æ–∑–¥–∞–µ—Ç –≤–∏–¥–µ–æ-–æ—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã –∑–∞ 24 —á–∞—Å–∞.  

**–§—É–Ω–∫—Ü–∏—è `create_simulation_video(frames, specialists_count, second_model_name, fps=24)`**

#### –ß—Ç–æ –≤ –∫–∞–¥—Ä–µ:

**1. –î–∏–Ω–∞–º–∏–∫–∞ –ø–æ—Ç–æ–∫–∞ (–≤–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π)**
- –ì—Ä–∞—Ñ–∏–∫ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞—è–≤–æ–∫ –ø–æ –º–∏–Ω—É—Ç–∞–º  
- –ó–∞–ª–∏–≤–∫–∞ –ø–æ–¥ –∫—Ä–∏–≤–æ–π  

**2. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ (–≤–µ—Ä—Ö–Ω–∏–π –ø—Ä–∞–≤—ã–π)**
- –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏  
- –û—Ç–º–µ—Ç–∫–∞ 80% (—Ü–µ–ª—å `PID`)  
- –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ  
  
**3. Heatmap —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ (–Ω–∏–∂–Ω–∏–π –ª–µ–≤—ã–π)**
- –¢–∞–±–ª–∏—Ü–∞ 20√ó20 (–¥–æ 400 —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤)  
- –¶–≤–µ—Ç–æ–≤–∞—è —à–∫–∞–ª–∞: –∑–µ–ª–µ–Ω—ã–π (—Å–≤–æ–±–æ–¥–µ–Ω) ‚Üí –∂–µ–ª—Ç—ã–π ‚Üí –∫—Ä–∞—Å–Ω—ã–π (–∑–∞–Ω—è—Ç 8+ –º–∏–Ω)  
- –¢–µ–∫—Å—Ç–æ–≤–∞—è –ª–µ–≥–µ–Ω–¥–∞  

**4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—á–µ—Ä–µ–¥–∏ (–Ω–∏–∂–Ω–∏–π –ø—Ä–∞–≤—ã–π)**  
- –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –º–æ–¥–µ–ª–µ–π (–∫—Ä–∞—Å–Ω–µ–µ—Ç –ø—Ä–∏ >50)  
- –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª  
- –ò—Ç–æ–≥–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:  
  - –í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ  
  - –ê–≤—Ç–æ-–æ–¥–æ–±—Ä–µ–Ω–æ / –∞–≤—Ç–æ-–æ—Ç–∫–∞–∑—ã  
  - –†—É—á–Ω–æ–π —Ä–∞–∑–±–æ—Ä (–º–æ–¥–µ–ª–∏ / –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞)  
  - –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –º–æ–¥–µ–ª—å  

#### –§–æ—Ä–º–∞—Ç –≤–∏–¥–µ–æ:  
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª  
- –ö–æ–¥–µ–∫: `H.264`  
- –ü–∏–∫—Å–µ–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: `yuv420p` (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å–æ –≤—Å–µ–º–∏ –ø–ª–µ–µ—Ä–∞–º–∏)  

## üé• –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
from app.simulation.visualization.animation import create_simulation_video

# frames —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–∏–º—É–ª—è—Ü–∏–∏
video_path = create_simulation_video(
    frames=animation_frames,
    specialists_count=100,
    second_model_name="XGBoost",
    fps=24
)
```
## üîß –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤

`pages/simulation.py` - –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø–æ—Å–ª–µ —Å–∏–º—É–ª—è—Ü–∏–∏  
`pages/simulation.py` - —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  

üìö –ü–æ–¥—Ä–æ–±–Ω–µ–µ  
[–Ø–¥—Ä–æ —Å–∏–º—É–ª—è—Ü–∏–∏](../core/README.md)  
[PID-—Ä–µ–≥—É–ª—è—Ç–æ—Ä](../controllers/README.md)  
[–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∏–º—É–ª—è—Ü–∏–∏](../../../pages/README.md)  
